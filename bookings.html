<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>

<body class="light">

<div class="header">
<button onclick="toggleSidebar()">â˜°</button>
<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h3>
<button onclick="toggleMode()">ğŸŒ™ / â˜€</button>
</div>

<div class="sidebar" id="sidebar">
<a href="index.html">ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
<a href="clients.html">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
<a href="bookings.html">ğŸ“… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</a>
<a href="payments.html">ğŸ’° Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</a>
</div>

<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="main">

<form id="bookingForm">
<select id="clientSelect" required></select>
<input type="number" id="total" placeholder="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù‚Ø¯" required>
<input type="date" id="date" required>
<button class="btn-primary">Ø¥Ø¶Ø§ÙØ© Ø­Ø¬Ø²</button>
</form>

<table>
<thead>
<tr>
<th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
<th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="bookingTable"></tbody>
</table>

</div>

<script>
let clients = JSON.parse(localStorage.getItem("clients")) || [];
let bookings = JSON.parse(localStorage.getItem("bookings")) || [];

function saveBookings(){
localStorage.setItem("bookings", JSON.stringify(bookings));
}

function loadClients(){
clientSelect.innerHTML="";
clients.forEach(c=>{
clientSelect.innerHTML+=
`<option value="${c.id}">${c.name}</option>`;
});
}

function renderBookings(){
bookingTable.innerHTML="";
bookings.forEach(b=>{
let client = clients.find(c=>Number(c.id)===Number(b.clientId));
bookingTable.innerHTML+=`
<tr>
<td>${client ? client.name : "ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"}</td>
<td>${b.total}</td>
<td>${b.date}</td>
<td>
<button class="btn-danger"
onclick="deleteBooking(${b.id})">ğŸ—‘</button>
</td>
</tr>`;
});
}

function deleteBooking(id){
bookings = bookings.filter(b=>b.id!=id);
saveBookings();
renderBookings();
}

bookingForm.addEventListener("submit",function(e){
e.preventDefault();
bookings.push({
id:Date.now(),
clientId:clientSelect.value,
total:total.value,
date:date.value
});
saveBookings();
renderBookings();
this.reset();
});

loadClients();
renderBookings();
</script>

<script>
function toggleSidebar(){
document.getElementById("sidebar").classList.toggle("active");
document.getElementById("overlay").classList.toggle("show");
}

function closeSidebar(){
document.getElementById("sidebar").classList.remove("active");
document.getElementById("overlay").classList.remove("show");
}

function toggleMode(){
document.body.classList.toggle("dark");
document.body.classList.toggle("light");
}
</script>

</body>
</html>
