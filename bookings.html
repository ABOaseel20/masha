<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</title>
<link href="assets/css/style.css" rel="stylesheet">
</head>
<body>

<div class="main">

<h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h3>

<form id="bookingForm">
<select id="clientSelect" required></select>
<input type="number" id="total" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" required>
<input type="date" id="date" required>
<button>Ø­ÙØ¸</button>
</form>

<table border="1" width="100%">
<thead>
<tr>
<th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
<th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="bookingTable"></tbody>
</table>

</div>

<script>

let clients = JSON.parse(localStorage.getItem("clients")) || [];
let bookings = JSON.parse(localStorage.getItem("bookings")) || [];

function saveBookings(){
localStorage.setItem("bookings", JSON.stringify(bookings));
}

function loadClients(){
clientSelect.innerHTML="";
clients.forEach(c=>{
clientSelect.innerHTML+=`
<option value="${Number(c.id)}">${c.name}</option>`;
});
}

function renderBookings(){
bookingTable.innerHTML="";

bookings.forEach(b=>{
let client = clients.find(c=>Number(c.id)===Number(b.clientId));

bookingTable.innerHTML+=`
<tr>
<td>${client ? client.name : "Ø¹Ù…ÙŠÙ„ Ù…Ø­Ø°ÙˆÙ"}</td>
<td>${b.total} Ø±ÙŠØ§Ù„</td>
<td>${b.date}</td>
<td><button onclick="deleteBooking(${b.id})">ğŸ—‘</button></td>
</tr>`;
});
}

function deleteBooking(id){
bookings = bookings.filter(b=>Number(b.id)!==Number(id));
saveBookings();
renderBookings();
}

bookingForm.addEventListener("submit",function(e){
e.preventDefault();

bookings.push({
id: Date.now(),
clientId: Number(clientSelect.value),
total: Number(total.value),
date: date.value
});

saveBookings();
this.reset();
renderBookings();
});

loadClients();
renderBookings();

</script>
</body>
</html>
