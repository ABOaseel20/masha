<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª | Ù‚ØµØ± Ø§Ù„Ù…Ø§Ø³Ø©</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
<link href="assets/css/style.css" rel="stylesheet">
</head>

<body class="dark">

<div class="loader"><img src="assets/img/diamond.png"></div>

<div class="header">
<button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
<h4>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h4>
<button onclick="toggleMode()" class="btn btn-sm btn-warning">ğŸŒ™ / â˜€</button>
</div>

<div class="overlay" id="overlay" onclick="closeSidebar()"></div>

<div class="sidebar" id="sidebar">
<a href="index.html">ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
<a href="clients.html">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
<a href="bookings.html" class="active-link">ğŸ“… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</a>
<a href="payments.html">ğŸ’° Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</a>
<a href="reports.html">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
</div>

<div class="main">

<div class="card-box mb-4">
<form id="bookingForm" class="row g-3">
<div class="col-md-4">
<select id="clientSelect" class="form-control" required></select>
</div>
<div class="col-md-3">
<input type="number" id="total" class="form-control" placeholder="Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù‚Ø¯" required>
</div>
<div class="col-md-3">
<input type="date" id="date" class="form-control" required>
</div>
<div class="col-md-2">
<button class="btn btn-success w-100">Ø­ÙØ¸</button>
</div>
</form>
</div>

<div class="card-box">
<table class="table table-bordered text-center">
<thead class="table-dark">
<tr>
<th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
<th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
<th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="bookingTable"></tbody>
</table>
</div>

</div>

<script src="assets/js/app.js"></script>
<script>
let clients=JSON.parse(localStorage.getItem("clients"))||[];
let bookings=JSON.parse(localStorage.getItem("bookings"))||[];

function saveBookings(){
localStorage.setItem("bookings",JSON.stringify(bookings));
}

function loadClients(){
clientSelect.innerHTML="";
clients.forEach(c=>{
clientSelect.innerHTML+=`<option value="${c.id}">${c.name}</option>`;
});
}

function renderBookings(){
bookingTable.innerHTML="";
bookings.forEach(b=>{
let client=clients.find(c=>c.id==b.clientId);
bookingTable.innerHTML+=`
<tr>
<td>${client?.name}</td>
<td>${b.total} Ø±ÙŠØ§Ù„</td>
<td>${b.date}</td>
<td><button class="btn btn-danger btn-sm" onclick="deleteBooking(${b.id})">ğŸ—‘</button></td>
</tr>`;
});
}

function deleteBooking(id){
bookings=bookings.filter(b=>b.id!=id);
saveBookings();
renderBookings();
}

bookingForm.addEventListener("submit",function(e){
e.preventDefault();
bookings.push({
id:Date.now(),
clientId:clientSelect.value,
total:Number(total.value),
date:date.value
});
saveBookings();
this.reset();
renderBookings();
});

loadClients();
renderBookings();
</script>

</body>
</html>
