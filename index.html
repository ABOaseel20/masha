<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Ø±Ø¨Ø· Ù…Ù„Ù Ø§Ù„Ø³ØªØ§ÙŠÙ„ -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="light">

  <!-- HEADER -->
  <div class="header">
    <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
    <h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
    <button onclick="toggleMode()">ğŸŒ™ / â˜€</button>
  </div>

  <!-- SIDEBAR -->
  <div class="sidebar" id="sidebar">
    <a href="index.html">ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
    <a href="clients.html">ğŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
    <a href="bookings.html">ğŸ“… Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</a>
    <a href="payments.html">ğŸ’° Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</a>
    <a href="reports.html">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
  </div>

  <!-- OVERLAY -->
  <div class="overlay" id="overlay" onclick="closeSidebar()"></div>

  <!-- MAIN -->
  <div class="main">
    <h2 style="margin-bottom:20px;">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h2>
    <div class="cards">
      <div class="card">
        <h4>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h4>
        <h2 id="clientsCount">0</h2>
      </div>
      <div class="card">
        <h4>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h4>
        <h2 id="bookingsCount">0</h2>
      </div>
      <div class="card">
        <h4>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</h4>
        <h2 id="revenueCount">0 Ø±ÙŠØ§Ù„</h2>
      </div>
      <div class="card">
        <h4>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</h4>
        <h2 id="remainingCount">0 Ø±ÙŠØ§Ù„</h2>
      </div>
    </div>
  </div>

  <script>
    // ===== SIDEBAR (ÙØªØ­/ØºÙ„Ù‚) =====
    function toggleSidebar() {
      document.getElementById("sidebar").classList.toggle("active");
      document.getElementById("overlay").classList.toggle("show");
    }
    function closeSidebar() {
      document.getElementById("sidebar").classList.remove("active");
      document.getElementById("overlay").classList.remove("show");
    }

    // ===== MODE (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ) =====
    function toggleMode() {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
    }

    // ===== Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª =====
    let clients = JSON.parse(localStorage.getItem("clients")) || [];
    let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
    let payments = JSON.parse(localStorage.getItem("payments")) || [];

    function calculateStats() {
      let totalRevenue = payments.reduce((sum, p) => sum + Number(p.amount), 0);
      let totalContracts = bookings.reduce((sum, b) => sum + Number(b.total), 0);
      let remaining = totalContracts - totalRevenue;

      document.getElementById("clientsCount").innerText = clients.length;
      document.getElementById("bookingsCount").innerText = bookings.length;
      document.getElementById("revenueCount").innerText = totalRevenue + " Ø±ÙŠØ§Ù„";
      document.getElementById("remainingCount").innerText = remaining + " Ø±ÙŠØ§Ù„";
    }
    calculateStats();
  </script>
</body>
</html>
