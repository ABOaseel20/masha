<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>المدفوعات</title>
<link href="assets/css/style.css" rel="stylesheet">
</head>
<body>

<h3>المدفوعات</h3>

<table border="1" width="100%">
<thead>
<tr>
<th>العميل</th>
<th>المبلغ</th>
<th>التاريخ</th>
</tr>
</thead>
<tbody id="paymentTable"></tbody>
</table>

<script>

let clients = JSON.parse(localStorage.getItem("clients")) || [];
let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
let payments = JSON.parse(localStorage.getItem("payments")) || [];

function renderPayments(){
paymentTable.innerHTML="";

payments.forEach(p=>{
let booking = bookings.find(b=>Number(b.id)===Number(p.bookingId));
let client = booking 
? clients.find(c=>Number(c.id)===Number(booking.clientId))
: null;

paymentTable.innerHTML+=`
<tr>
<td>${client ? client.name : "غير موجود"}</td>
<td>${p.amount} ريال</td>
<td>${p.date}</td>
</tr>`;
});
}

renderPayments();

</script>

</body>
</html>
